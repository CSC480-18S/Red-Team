var row=11,column=11,tileSlotNumber=7,currentTileCount=tileSlotNumber+1,firstTimeGeneratedTiles=[];let ws=new WebSocket("ws://localhost:3000");function removeForError(e){this.data.error=e,$("#removable").remove()}function dataUpdate(e){if(this.data.isTurn=e.isTurn,e.isTurn||(this.data.colored=!1),this.data.score=e.score,this.data.goldScore=e.latestData.gold,this.data.greenScore=e.latestData.green,boardUpdate(e.latestData.board),console.log("received dataUpdate event: "),console.log(e),this.data.username=e.name,this.data.tileSlots=generateTiles(e.tiles),!1===e.isTurn){this.data.playTime="Wait for your turn...",document.getElementById("btnSwap").disabled=!0,document.getElementById("btnPlace").disabled=!0,document.getElementById("btnShuffle").disabled=!0;for(var t=0;t<tileSlotNumber;t++)this.data.tileSlots[t].tile.disabled=!0}else{this.data.playTime="It's your turn!",document.getElementById("btnSwap").disabled=!1,document.getElementById("btnPlace").disabled=!1,document.getElementById("btnShuffle").disabled=!1;for(t=0;t<tileSlotNumber;t++)this.data.tileSlots[t].tile.disabled=!1}}function boardUpdate(e){for(this.data.currentPlayTileAmount=0,i=0;i<row;i++)for(j=0;j<column;j++){var t=document.getElementById("square-"+i+"-"+j);if(!t.hasChildNodes()&&null!==e[i][j]){var a={id:"playedLetter: "+e[i][j],letter:e[i][j],value:tileValue(e[i][j]),highlightedColor:void 0,visibility:"visible"},l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("id",a.id),l.setAttribute("visibility","visible");var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("stroke","black"),s.setAttribute("stroke-width","1px"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("fill","#D3D3D3"),l.appendChild(s);var r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x","50%"),r.setAttribute("y","60%"),r.setAttribute("alignment-baseline","middle"),r.setAttribute("text-anchor","middle"),r.setAttribute("fill",void 0),r.textContent=a.letter,l.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("x","70%"),o.setAttribute("y","30%"),o.setAttribute("fill",void 0),o.setAttribute("class","letter-value"),o.textContent=a.value,l.appendChild(o),t.appendChild(l),this.data.tilesOnBoardValueAndPosition.push({tileLetter:a.letter,xAxis:i,yAxis:j})}}}function gameOver(e){for(let e=this.data.tilesOnBoardValueAndPosition.length-1;e>=0;e--){var t=this.data.tilesOnBoardValueAndPosition[e],i=document.getElementById("square-"+t.xAxis+"-"+t.yAxis);i.removeChild(i.firstChild),this.data.tilesOnBoardValueAndPosition.pop()}this.data.selectedTileId="";for(var a=0;a<tileSlotNumber;a++)this.data.tileSlots[a].tile.highlightedColor="#000000"}function invalidPlay(){for(let i=0;i<this.data.currentPlayTileAmount;i++){var e=this.data.tilesOnBoardValueAndPosition[this.data.tilesOnBoardValueAndPosition.length-1];if(void 0!=e){var t=document.getElementById("square-"+e.xAxis+"-"+e.yAxis);this.data.tilesOnBoardValueAndPosition.pop(),t.removeChild(t.firstChild)}}this.data.selectedTileId="";for(var i=0;i<tileSlotNumber;i++)this.data.tileSlots[i].tile.highlightedColor="#000000";this.data.currentPlayTileAmount=0;for(let e=0;e<this.data.tileSlots.length;e++)this.data.tileSlots[e].hasTile=!0,this.data.tileSlots[e].tile.visibility="visible"}function playTime(e){this.data.playTime="Play time: "+e,this.data.colored=e%2==0}ws.onopen=function(e){ws.send(JSON.stringify({event:"whoAmI",data:{client:"CL"}})),ws.onmessage=function(e){let t=JSON.parse(e.data);switch(console.log(t.event),t.event){case"errorMessage":removeForError(t.data.error);break;case"gameOver":let e=t.data.scores.map((e,t)=>`${t+1}: ${e.name} | Score: ${e.score}\n`);swal({title:"Game Over!",text:`${e.join("")}\n          Winning Team: ${t.data.winningTeam}\n\n          Winner: ${t.data.winner}`,icon:"success",button:"Ok!"}),gameOver(t.data);break;case"invalidPlay":invalidPlay();break;case"playTimer":playTime(t.data.time);break;case"gameEvent":console.log("received gameEvent: "),console.log(t.data);var i=t.data.action;document.getElementById("actualEvent").innerHTML=i;break;case"dataUpdate":console.log(t),dataUpdate(t.data);break;default:console.log(t.data)}}};var data={selectedTileId:"",selectedTileParentId:"",selectedSquareId:"",rows:generateTableRows(),squares:generateSquares(),tileSlots:[],tilesOnBoard:[],selectedTileCopyId:"",currentRoundtileIdsOnBoard:[],tilesOnBoardValueAndPosition:[],currentPlayTileAmount:0,username:"",greenScore:0,goldScore:0,playTime:"",isTurn:!1,score:0,colored:!1,error:null};function generateTableRows(){for(var e=[],t=0;t<row;t++)e.push(t);return e}function generateSquares(){for(var e=[],t=0;t<row;t++)for(var i=0;i<column;i++)e.push({id:"square-"+t+"-"+i,xAxis:t,yAxis:i,isSquareGreen:!0,isSquareYellow:!1,squareBackgroundColor:"rgb(171,171,171)"});for(var a=0;a<e.length;a++)switch(e[a].id){case"square-0-0":case"square-0-7":case"square-2-4":case"square-3-7":case"square-3-10":case"square-4-2":case"square-6-8":case"square-7-0":case"square-7-3":case"square-8-6":case"square-10-3":case"square-10-10":e[a].squareBackgroundColor="rgb(242,195,50)";break;case"square-0-3":case"square-0-10":case"square-2-6":case"square-3-0":case"square-3-3":case"square-4-8":case"square-6-2":case"square-7-7":case"square-7-10":case"square-8-4":case"square-10-0":case"square-10-7":e[a].squareBackgroundColor="rgb(24,180,76)";break;case"square-5-5":e[a].squareBackgroundColor="rgb(84,76,76)"}return e}function generateTiles(e){var t=[];if(0===firstTimeGeneratedTiles.length)for(var i=0;i<e.length;i++){var a=e[i],l=this.tileValue(a);t.push({id:"slot"+i,hasTile:!0,tile:{id:"tile"+i,letter:a,value:l,highlightedColor:void 0,visibility:"visible",disabled:!1}}),firstTimeGeneratedTiles.push(a)}else for(i=0;i<e.length;i++){a=e[i],l=this.tileValue(a);t.push({id:"slot"+i,hasTile:!0,tile:{id:"tile"+currentTileCount,letter:a,value:l,highlightedColor:void 0,visibility:"visible",disabled:!1}}),currentTileCount++}return t}function tileValue(e){switch(e){case"A":case"E":case"I":case"O":case"U":case"L":case"N":case"S":case"T":case"R":return 1;case"D":case"G":return 2;case"B":case"C":case"M":case"P":return 3;case"F":case"H":case"V":case"W":case"Y":return 4;case"K":return 5;case"J":case"X":return 8;case"Q":case"Z":return 10}}var drag=function(e){e.dataTransfer.setData("text",e.target.id)},allowDrop=function(e){e.preventDefault()},drop=function(e){e.preventDefault();var t=e.dataTransfer.getData("text");e.target.innerHTML="",e.target.appendChild(document.getElementById(t));var i,a=!1;for(i=0;i<this.doubleScoreGameBoardBlocks.length;i++)if(e.target.id===this.doubleScoreGameBoardBlocks[i]){a=!0;break}this.accumulator+=a?2*this.scoreUnit:this.scoreUnit},selectAndDeselectTile=function(e){for(var t=document.getElementById(e),i=0;i<tileSlotNumber;i++)l=this.tileSlots[i].tile.disabled,t.id!==this.tileSlots[i].tile.id||l?this.tileSlots[i].tile.highlightedColor="#000000":this.tileSlots[i].tile.highlightedColor="#d61515";if(!l){var a=t.parentNode.parentNode.parentNode;if(this.selectedTileId=e,"wrapper-slots"===a.className){var l=!1,s=(t=document.getElementById(e)).parentNode.id;this.selectedTileParentId=s,this.tilesOnBoard.push({tileId:e,parentId:s}),this.selectedTileCopyId=""}else"wrapper-board"===a.className&&(this.selectedTileCopyId="")}},putTileInSquare=function(e){document.getElementById(e);if(""!==this.selectedTileId){var t=document.getElementById(e);if(""===this.selectedTileCopyId&&0===t.children.length){var i=document.getElementById(this.selectedTileId).cloneNode(!0);t.appendChild(i),this.selectedTileCopyId=i.id;for(var a=0;a<tileSlotNumber;a++)this.selectedTileId===this.tileSlots[a].tile.id&&(this.tileSlots[a].hasTile=!1,this.tileSlots[a].tile.visibility="hidden");for(a=0;a<this.squares.length;a++)e===this.squares[a].id&&(this.currentPlayTileAmount++,this.tilesOnBoardValueAndPosition.push({tileLetter:document.getElementById(this.selectedTileId).children[1].innerHTML,xAxis:this.squares[a].xAxis,yAxis:this.squares[a].yAxis}));this.currentRoundtileIdsOnBoard.push(i.id)}else if(t.hasChildNodes()){var l=t.children[0];if("#D3D3D3"!==l.children[0].getAttribute("fill")){t.removeChild(l),this.selectedTileCopyId="";for(a=0;a<tileSlotNumber;a++)l.id===this.tileSlots[a].tile.id&&(this.tileSlots[a].hasTile=!0,this.tileSlots[a].tile.visibility="visible",this.tileSlots[a].tile.highlightedColor="#000000");this.tilesOnBoardValueAndPosition.pop(),this.currentPlayTileAmount--,this.currentRoundtileIdsOnBoard.pop(this.selectedTileCopyId)}}else;}},swap=function(){for(let i=0;i<this.currentPlayTileAmount;i++){var e=this.tilesOnBoardValueAndPosition[this.tilesOnBoardValueAndPosition.length-1],t=document.getElementById("square-"+e.xAxis+"-"+e.yAxis);this.tilesOnBoardValueAndPosition.pop(),t.removeChild(t.firstChild)}this.selectedTileId="";for(var i=0;i<tileSlotNumber;i++)this.tileSlots[i].tile.highlightedColor="#000000";this.currentPlayTileAmount=0;for(let e=0;e<this.tileSlots.length;e++)this.tileSlots[e].hasTile=!0,this.tileSlots[e].tile.visibility="visible";ws.send(JSON.stringify({event:"swap"}))},grey=function(){for(var e=0;e<this.currentRoundtileIdsOnBoard.length;e++){var t=document.getElementById(this.currentRoundtileIdsOnBoard[e]);t.children[0].setAttribute("fill","rgb(212,212,212)"),t.children[1].setAttribute("fill","#000000"),t.children[2].setAttribute("fill","#000000")}this.currentRoundtileIdsOnBoard=[],this.selectedTileId="",this.selectedTileCopyId=""},shuffle=function(){this.tileSlots.sort(function(){return.5-Math.random()})};function emitBoard(){for(var e=new Array(row),t=0;t<row;t++)e[t]=new Array(column);for(t=0;t<row;t++)for(var i=0;i<column;i++)void 0==e[t][i]&&(e[t][i]=null);var a=this.data.tilesOnBoardValueAndPosition;for(t=0;t<a.length;t++){var l=a[t].xAxis,s=a[t].yAxis;e[l][s]=a[t].tileLetter}let r={event:"playWord",data:{play:e}};ws.send(JSON.stringify(r))}function helpFunction(){let e=["To play a tile on the board, 'Tap' the tile in your hand and then 'Tap' the board where you want to play it.","The EXCHANGE button will replace your tiles with a new hand and move on to the next player's turn.","The SHUFFLE button will shuffle the tiles in your hand, but will not skip your turn.","The DONE button is how you place a word on the board to complete your turn.","You will have one minute to play a word or EXCHANGE your hand before your turn is skipped.","The GAME EVENT box will flash red when it is your turn and the timer is counting down."].map((e,t)=>`${t+1}: ${e}\n`);swal({title:"Help",text:`${e.join("")}`,icon:"info",button:"Ok!"})}
//# sourceMappingURL=maps/board.min.js.map
